{{ if or .Values.sonarr.enabled .Values.sonarrplus.enabled .Values.sonarrhobbit.enabled }}
{{ if .Values.volsync.enabled }}
apiVersion: volsync.backube/v1alpha1
kind: ReplicationSource
metadata:
  name: config-sonarr4k-block
spec:
  sourcePVC: config-sonarr-block
  trigger:
    schedule: "0 9 * * *" # 1h before maintenance
    manual: tbc
  restic:
    pruneIntervalDays: 7
    repository: config-sonarr-block-volsync-restic-config
    retain:
      daily: 2
    copyMethod: Clone
    cacheCapacity: 20Gi
    cacheStorageClassName: topolvm-provisioner-thin
{{ end }}
{{ end }}