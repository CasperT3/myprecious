{{ if .Values.rclonemountdebridav.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-debridav
  namespace: csi-rclone
type: Opaque
stringData:
  remote: debridav-{{ .Release.Name }}
  remotePath: # intentionally left blank, webdav doesn't need it
  allow-non-empty: "true"
  allow-other: "true"
  attr-timeout: 3600m
  uid: "568"
  gid: "568" 
  vfs-cache-mode: "off"
  no-modtime: "true"
  no-checksum: "true"
  poll-interval: 60s
  transfers: "40"
  checkers: "40"
  multi-thread-streams: "0"
  use-mmap: "true"
  buffer-size: 64M
  dir-cache-time: 0s
  contimeout: 10s
  timeout: 10s
  configData: |
    [debridav-{{ .Release.Name }}]
    type = webdav
    url: http://debridav.{{ .Release.Namespace }}.svc.cluster.local:8080
    vendor = other
    pacer_min_sleep = 0
{{ end }}